<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>wechat share</title>
<meta name="viewport" content="user-scalable=no, width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=1">
<meta name="apple-mobile-web-app-title" content="YVES ROCHER" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="format-detection" content="telephone=no" />
<script src="wechat-share.js"></script>
</head>
<body>
<div id="msg"></div>
<h1>WECHAT SHARE</h1>
<p>点击右上角可以进行分享哦</p>
<h3>可配置参数：</h3>
<div>
  <label>图片：<input type="text" name="img" /></label>
</div>
<div>
  <label>图片宽：<input type="text" name="img_width" /></label>
</div>
<div>
  <label>图片高：<input type="text" name="img_height" /></label>
</div>
<div>
  <label>分享链接：<input type="text" name="url" /></label>
</div>
<div>
  <label>分享标题：<input type="text" name="title" /></label>
</div>
<div>
  <label>分享描述：<input type="text" name="desc" /></label>
</div>
<div>
  <label>回调函数：</label><label><input type="checkbox" value="white" name="callback" />变白色</label><label><input type="checkbox" value="black" name="callback" />变黑色</label>
</div>
<style>
#msg {position: fixed; max-height: 2.8em; overflow: hidden; line-height: 1.4em; top: 0; left: 0; z-index: 2; width: 100%; background: rgba(0, 0, 0, 0.6); color: #fff}
input {border: 1px solid #007e47}
.white {color: #000; background: #fff;}
.white input {color: #000; background: #fff;}
.black {color: #fff; background: #000;}
.black input {color: #fff; background: #000;}
</style>
<script>
  var log = function (s) {
    var obj = document,getElementById('msg');
    obj.innerHTML = '<div>' + s + '</div>' + obj.innerHTML;
  }

  window.addEventListener('load', function () {
    wechatShare.ini();
  });
  document.getElementsByTagName('input').addEventListener('blur', function () {
    var item = {};
    log('blur; name: ' + this.name + '; value: ' + this.value);
    if (this.type === 'text' && this.value !== '') {
      item[this.name] = this.value;
    } else {
      if (this.checked) {
        var v = this.value;
        item[this.name] = function () {
          document.body.className = v;
        }
      }
    }
    wechatShare.update(item);
  });
</script>

</body>
</html>